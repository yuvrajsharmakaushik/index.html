<script>
window.onload = function(){

const card = document.getElementById("card");
const song = document.getElementById("song");
const PASSCODE = 218;

/* ğŸ’Œ QUIZ */
const quiz = [
  {
    q:"When did we first text? ğŸ’¬",
    options:["18th Jan 2025","20th Jan 2025","14th Feb 2025"],
    answer:"18th Jan 2025"
  },
  {
    q:"When did you feel it but didnâ€™t say it yet? â¤ï¸",
    options:["16th July 2025","1st July 2025","21st Aug 2025"],
    answer:"16th July 2025"
  },
  {
    q:"Where did we try to meet for the first time? ğŸŒ¸",
    options:["India Gate","CP","Dada Dev"],
    answer:"Dada Dev"
  },
  {
    q:"What do I call you the most? ğŸ’—",
    options:["Aviii","Baby","Darlaaa"],
    answer:"Aviii"
  },
  {
    q:"who said to me helloo papa ? ğŸ¥º",
    options:["virajj","vishuu","Aviii","ivu"],
    answer:"ivu"
  },
  {
    q:"what was my nickname before Yuvu ğŸŒ?",
    options:["yuviee","YuviekağŸ’…âœ¨","yuvrajjjjj"],
    answer:"YuviekağŸ’…âœ¨"
  },
  {
    q:"what do you owe me after boards?????? âœ¨âœ¨",
    options:[
      "your timeee",
      "clutcher",
      "coffee date",
      "strap bracelet/rubberband",
      "all of the aboveâœ¨"
    ],
    answer:"all of the aboveâœ¨"
  },
  {
    q:"Will you be my Valentine? ğŸ’˜",
    options:["Yes","No"],
    answer:"Yes",
    special:true
  }
];

let step = -1;
let locked = false;

/* ğŸ”§ HELPERS */
function vibrate(ms){
  if(navigator.vibrate) navigator.vibrate(ms);
}

function show(html){
  card.innerHTML = html;
}

function popup(text){
  const p=document.createElement("div");
  p.className="popup";
  p.innerText=text;
  document.body.appendChild(p);
  setTimeout(()=>p.remove(),1500);
}

function hearts(){
  for(let i=0;i<15;i++){
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="â¤ï¸";
    h.style.left=Math.random()*100+"vw";
    h.style.bottom="30px";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),1500);
  }
}

/* ğŸ” PASSCODE */
function showPass(){
  show(`
    <h3>ğŸ” Enter Passcode</h3>
    <p>218 â€” sign of God embedded in us âœ¨</p>
    <input id="pass" type="password"
      style="width:100%;padding:12px;
      font-size:18px;text-align:center;
      border-radius:10px;border:1px solid #ccc">
    <button id="unlock">Unlock ğŸ’–</button>
  `);
  document.getElementById("unlock").onclick = checkPass;
}

function checkPass(){
  const v=parseInt(
    document.getElementById("pass").value.replace(/\D/g,""),10
  );
  if(v===PASSCODE){
    song.currentTime=46;
    song.play().catch(()=>{});
    step=0;
    showQuestion();
  } else {
    vibrate(200);
    popup("Wrong passcode ğŸ˜¤");
  }
}

/* â“ QUESTIONS */
function showQuestion(){
  locked=false;
  const q=quiz[step];
  let html=`<h3>${q.q}</h3>`;
  q.options.forEach(o=>{
    html+=`<button class="option">${o}</button>`;
  });
  show(html);

  card.querySelectorAll(".option").forEach(b=>{
    b.onclick=()=>checkAnswer(b.innerText);
  });
}

function checkAnswer(choice){
  if(locked) return;
  locked=true;

  const q=quiz[step];

  /* ğŸ’˜ VALENTINE LOGIC */
  if(q.special && choice==="No"){
    vibrate([100,50,100]);
    popup("nopesss âŒ system error ğŸ˜Œ you are already my valentine forever â™¾ï¸");
    hearts();
    setTimeout(()=>locked=false,1300); // retry SAME question
    return;
  }

  if(choice===q.answer){
    vibrate(80);
    popup("mwwwwwaaaaaaaaaaaaaahhhhhh ğŸ˜˜");
    hearts();
    setTimeout(nextStep,1400);
  } else {
    vibrate(150);
    popup("try again darlaaa ğŸ¥º");
    setTimeout(()=>locked=false,1200);
  }
}

function nextStep(){
  step++;
  if(step<quiz.length){
    showQuestion();
  } else {
    show(`
      <h3>Forever ğŸ’–</h3>
      <p style="font-size:14px;line-height:1.6">
        mera baccha i loveeeeee u  
        i never want to be without u not even for a single day  
        jaan dont leave me i wont be able to handle it  
        i promise ill not run jb koi prob aayegi  
        tere saath khada rheke sab jhel jaunga  
        bs mera haath mt chordhna  
        tumhe kbhi dur nhi jaane dunga  
        mwwwwaaaaahhhh ğŸ˜˜
      </p>
    `);
  }
}

/* ğŸš€ START */
showPass();

};
</script>

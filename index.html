<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For My Aviii ‚ù§Ô∏è</title>

<style>
*{box-sizing:border-box;font-family:Arial,sans-serif}
html,body{margin:0;height:100%;overflow:hidden;background:#000}

video{
  position:fixed;
  top:0;left:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-2;
}

.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.45);
  z-index:-1;
}

.container{
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
}

.card{
  background:#fff;
  width:90%;
  max-width:360px;
  padding:22px;
  border-radius:18px;
  text-align:center;
}

button{
  width:100%;
  padding:14px;
  margin-top:12px;
  border:none;
  border-radius:12px;
  font-size:16px;
  cursor:pointer;
}

.option{background:#f3f3f3}
.primary{background:#ff5f8a;color:#fff}

.popup{
  position:fixed;
  bottom:40px;
  left:50%;
  transform:translateX(-50%);
  background:#fff;
  padding:12px 20px;
  border-radius:30px;
  font-weight:bold;
  z-index:999;
}

.heart{
  position:fixed;
  font-size:24px;
  animation:floatUp 1.5s linear forwards;
}

@keyframes floatUp{
  from{transform:translateY(0);opacity:1}
  to{transform:translateY(-120px);opacity:0}
}
</style>
</head>

<body>

<!-- üé• VIDEO (OLD STYLE ‚Äì MOST COMPATIBLE) -->
<video id="bgVideo" muted loop playsinline>
  <source src="background.mp4" type="video/mp4">
</video>

<div class="overlay"></div>

<audio id="song" src="jogan.mp3" preload="auto"></audio>

<div class="container">
  <div class="card" id="card">Loading‚Ä¶</div>
</div>

<script>
/* üöÄ SAFE START AFTER DOM */
document.addEventListener("DOMContentLoaded",function(){

/* FORCE VIDEO PLAY (KEY FIX) */
const bgVideo = document.getElementById("bgVideo");
bgVideo.play().catch(()=>{}); // <- THIS is why old code worked

const card = document.getElementById("card");
const song = document.getElementById("song");
const PASSCODE = 218;
let step = -1;
let locked = false;

const quiz = [
  {q:"When did we first text? üí¨",options:["18th Jan 2025","20th Jan 2025","14th Feb 2025"],answer:"18th Jan 2025"},
  {q:"When did you feel it but didn‚Äôt say it yet? ‚ù§Ô∏è",options:["16th July 2025","1st July 2025","21st Aug 2025"],answer:"16th July 2025"},
  {q:"Where did we try to meet first? üå∏",options:["India Gate","CP","Dada Dev"],answer:"Dada Dev"},
  {q:"What do I call you the most? üíó",options:["Aviii","Baby","Darlaaa"],answer:"Aviii"},
  {q:"who said helloo papa? ü•∫",options:["virajj","vishuu","Aviii","ivu"],answer:"ivu"},
  {q:"what do you owe me after boards? ‚ú®",options:["your timeee","clutcher","coffee date","strap bracelet","all of the above‚ú®"],answer:"all of the above‚ú®"},
  {q:"Will you be my Valentine? üíò",options:["Yes","No"],answer:"Yes",special:true}
];

function vibrate(ms){
  if(navigator.vibrate) navigator.vibrate(ms);
}

function popup(text){
  const p=document.createElement("div");
  p.className="popup";
  p.innerText=text;
  document.body.appendChild(p);
  setTimeout(()=>p.remove(),1500);
}

function hearts(){
  for(let i=0;i<12;i++){
    const h=document.createElement("div");
    h.className="heart";
    h.innerText="‚ù§Ô∏è";
    h.style.left=Math.random()*100+"vw";
    h.style.bottom="30px";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),1500);
  }
}

function render(html){ card.innerHTML=html; }

/* üîê PASSCODE */
render(`
  <h3>üîê Enter Passcode</h3>
  <p>218 ‚Äî sign of God embedded in us ‚ú®</p>
  <input id="pass" type="password"
   style="width:100%;padding:12px;font-size:18px;text-align:center;border-radius:10px">
  <button id="unlock" class="primary">Unlock üíñ</button>
`);

document.getElementById("unlock").onclick=function(){
  const v=parseInt(document.getElementById("pass").value,10);
  if(v===PASSCODE){
    song.currentTime=46;
    song.play().catch(()=>{});
    step=0;
    showQuestion();
  }else{
    vibrate(200);
    popup("Wrong passcode üò§");
  }
};

function showQuestion(){
  locked=false;
  const q=quiz[step];
  let html=`<h3>${q.q}</h3>`;
  q.options.forEach(o=>{
    html+=`<button class="option">${o}</button>`;
  });
  render(html);

  document.querySelectorAll(".option").forEach(b=>{
    b.onclick=()=>checkAnswer(b.innerText);
  });
}

function checkAnswer(choice){
  if(locked) return;
  locked=true;
  const q=quiz[step];

  if(q.special && choice==="No"){
    vibrate([100,50,100]);
    popup("nopesss ‚ùå system error üòå you are already my valentine forever ‚ôæÔ∏è");
    hearts();
    setTimeout(()=>locked=false,1200);
    return;
  }

  if(choice===q.answer){
    vibrate(80);
    popup("mwwwwwaaaaaaaaaaaaaahhhhhh üòò");
    hearts();
    setTimeout(()=>{
      step++;
      if(step<quiz.length) showQuestion();
      else render(`
        <h3>Forever üíñ</h3>
        <p style="font-size:14px;line-height:1.6">
        mera baccha i loveeeeee u<br>
        i never want to be without u not even for a single day<br>
        jaan dont leave me i wont be able to handle it<br>
        i promise ill not run jb koi prob aayegi<br>
        tere saath khada rheke sab jhel jaunga<br>
        bs mera haath mt chordhna<br>
        tumhe kbhi dur nhi jaane dunga<br>
        mwwwwaaaaahhhh üòò
        </p>
      `);
    },1400);
  }else{
    vibrate(150);
    popup("try again darlaaa ü•∫");
    setTimeout(()=>locked=false,1200);
  }
}

});
</script>

</body>
</html>
